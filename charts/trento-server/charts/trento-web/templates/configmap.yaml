apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "trento-web.fullname" . }}-configmap
data:
  DATABASE_URL: "ecto://{{ .Values.global.postgresql.postgresqlUsername }}:{{ .Values.global.postgresql.postgresqlPassword }}@{{ .Release.Name }}-{{ .Values.global.postgresql.name }}/trento"
  EVENTSTORE_URL: "ecto://{{ .Values.global.postgresql.postgresqlUsername }}:{{ .Values.global.postgresql.postgresqlPassword }}@{{ .Release.Name }}-{{ .Values.global.postgresql.name }}/trento_event_store"
  ENABLE_ALERTING: "{{ .Values.alerting.enabled }}"
  SMTP_SERVER: "{{ .Values.alerting.smtpServer }}"
  SMTP_PORT: "{{ .Values.alerting.smtpPort }}"
  SMTP_USER: "{{ .Values.alerting.smtpUser }}"
  ALERT_SENDER: "{{ .Values.alerting.sender }}"
  ALERT_RECIPIENT: "{{ .Values.alerting.recipient }}"
  PROMETHEUS_URL: "http://{{ .Release.Name }}-{{ .Values.global.prometheus.name }}"
  AMQP_URL: "amqp://trento:trento@{{ .Release.Name }}-{{ .Values.global.rabbitmq.name }}:{{ .Values.global.rabbitmq.servicePort }}"
  CHARTS_ENABLED: "{{ .Values.chartsEnabled }}"
  TRENTO_WEB_ORIGIN: "{{ .Values.trentoWebOrigin }}"
  ENABLE_OIDC: "{{ .Values.oidc.enabled }}"
  OIDC_CLIENT_ID: "{{ .Values.oidc.clientId }}"
  OIDC_BASE_URL: "{{ .Values.oidc.baseUrl }}"
  ENABLE_OAUTH2: "{{ .Values.oauth2.enabled }}"
  OAUTH2_CLIENT_ID: "{{ .Values.oauth2.clientId }}"
  OAUTH2_BASE_URL: "{{ .Values.oauth2.baseUrl }}"
  OAUTH2_AUTHORIZE_URL: "{{ .Values.oauth2.authorizeUrl }}"
  OAUTH2_TOKEN_URL: "{{ .Values.oauth2.tokenUrl }}"
  OAUTH2_USER_URL: "{{ .Values.oauth2.userUrl }}"
  OAUTH2_SCOPES: "{{ .Values.oauth2.scopes }}"
